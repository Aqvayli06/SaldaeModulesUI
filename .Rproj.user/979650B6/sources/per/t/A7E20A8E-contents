library("tidyr")
# library("SaldaeDataExplorer")
ui <- shinydashboard::dashboardPage(
  shinydashboard::dashboardHeader(title = "Shiny Modules"),
  shinydashboard::dashboardSidebar(disable = FALSE),
  shinydashboard::dashboardBody(

    tisefka_inu <- SaldaeModulesUI::ghred_tisefka_UI(id = "tisefka_tizegzawin"),

    SaldaeModulesUI::SA_tisefka_UI("SA_module_tisefka",mod_title= "Saldae Module"),

    SaldaeModulesUI::SA_tisefka_multiple_UI("SA_multiple_test",mod_title= "Saldae Module"),

    SaldaeModulesUI::SA_tisefka_aggregator_UI("SA_time_aggregator"),

    SaldaeModulesUI::SA_tisefka_gemmu_UI("SA_tisfka_gemmu"),

    SaldaeModulesUI::SA_tisefka_forecast_UI("SA_tisfka_forecast")
  )
)

server <- function(input, output, session) {

  tisefka_inu <- callModule(module = SaldaeModulesUI::ghred_tisefka_mod, id = "tisefka_tizegzawin")

  #---- one plot multiple graphs
  output$plot_inu <- callModule(module =  SaldaeModulesUI::SA_tisefka_mod, id = "SA_module_tisefka",tisefka = reactive({tisefka_inu()}))

  #----- multiple plot multiple graphs
  callModule(module =  SaldaeModulesUI::SA_tisefka_multiple_mod, id = "SA_multiple_test", tisefka = reactive({tisefka_inu()}))

  #----- Value Box
  callModule(module = SaldaeModulesUI::SA_Value_box_server, id = "SA_valuebox", tisefka = tisefka_vb)

  #----- multiple plot multiple graphs: aggregation and anomaly detection
  callModule(module =  SaldaeModulesUI::SA_tisefka_aggregator_mod, id = "SA_time_aggregator", tisefka = reactive({tisefka_inu()}))

  #----- multiple plot multiple graphs: growth rates
  callModule(module =  SaldaeModulesUI::SA_tisefka_gemmu_mod, id = "SA_tisfka_gemmu", tisefka = reactive({tisefka_inu()}))


  #------ Forecasting tool
  callModule(module =  SaldaeModulesUI::SA_tisefka_forecast_mod, id = "SA_tisfka_forecast", tisefka = reactive({tisefka_inu()}))


}

shinyApp(ui = ui, server = server)
